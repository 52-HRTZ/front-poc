<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Front Picker PoC - FIXED</title>
</head>
<body>
  <h2>ğŸ¯ Testing...</h2>
  <pre id="output" style="background:#111;color:#0f0;padding:10px;white-space:pre-wrap;"></pre>

  <script>
    // === Ù„ÛŒØ³Ù†Ø± Ø±Ùˆ Ù‡Ù…ÛŒÙ† Ø§ÙˆÙ„ Ø¨Ø°Ø§Ø± (Ù†Ù‡ ØªÙˆÛŒ onload) ===
    window.addEventListener("message", (e) => {
      console.log("ğŸ“¨ Received:", e);
      document.getElementById("output").textContent = 
        "âœ… Message!\nOrigin: " + e.origin + "\n\nData:\n" +
        JSON.stringify(e.data, null, 2);
      
      if(e.data?.type === "google-documents-selected" && e.data.documents?.[0]) {
        alert("ğŸ‰ SUCCESS! File: " + e.data.documents[0].name);
      }
    }, false);

    // === Ú©Ø§Ù†ÙÛŒÚ¯ ØªÙ…ÛŒØ² - Ø¨Ø¯ÙˆÙ† ÙØ§ØµÙ„Ù‡ Ø§Ø¶Ø§ÙÛŒ ===
    const config = {
      googleAppId: "754490832836",
      googleClientId: "754490832836-gs77odllghgisuja5jecijqihaolr08q.apps.googleusercontent.com",
      googleOAuthScope: "https://www.googleapis.com/auth/drive.readonly",
      googleDriveAllowedMimeTypes: "application/vnd.google-apps.document,application/vnd.google-apps.spreadsheet,application/vnd.google-apps.folder",
      origin: "https://github.io" // <<< Ø¯Ø§Ù…Ù†Ù‡ Ø®ÙˆØ¯Øª
    };

    // === Ø¨Ø§Ø² Ú©Ø±Ø¯Ù† Ù¾Ø§Ù¾â€ŒØ¢Ù¾ ===
    const url = `https://google-drive-picker.frontapplication.com/google-drive/index.html?config=${encodeURIComponent(JSON.stringify(config))}`;
    console.log("ğŸ¯ Opening:", url);
    window.open(url, "picker", "width=700,height=600");
  </script>
</body>
</html>
